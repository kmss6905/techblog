---
layout: post
title: "[Book] 랭체인으로 LLM 기반의 AI 서비스 개발하기[2/4]"
categories:
- "AI"
tags:
- "LLM"
- "LangChain"
- "RAG"
- "Book"
date: "2025-08-02 00:00:00 +0900"
toc: true
---

### 서론
언어모델로 부터 시작해서 LLM의 개념, 종류, 특징, 한계, 사용시 주의점 등등 을 앞서 살펴보았다. 입맛에 맛게 LLM을 활용하기 위해서는 파인튜닝(Fine Tuning) 이 필요하지만, 현실적인 어려움으로 인해 RAG를 선호한다. 이 장에서는 RAG의 개념부터 활용방법에 대해서 알아본다.


### RAG 란?

RAG(Retrieval-Augmented Generation)는 영어 그대로 검색증강생성 기술이다.
쉽게 설명하자면, LLM이 텍스트를 생성할 때 관련 정보를 찾아 보고(retrieval), 그 정보를 활용하여 새로운 텍스트를 만드는 (generation) 기술이라고 할 수 있다.

가령 RAG를 사용하는 LLM은 특정 질문에 답하기 위해 인터넷에서 정보를 검색하고, 그 정보를 바탕으로 상세하고 정확한 답변을 생성할 수 있다.

### RAG 구현 과정

결국 RAG 의 구현은 두 가지 과정으로 나뉘어진다.
1. **정보 검색(retrieval)**
2. **텍스트 생성(generation)**

#### 1. 정보 검색

정보 검색의 과정은 다음과 같다. 우리가 구글에 원하는 것을 검색해서 정보를 얻어내는 과정과 유사하다.

1. 질문입력 - 필요한 정보를 찾기 위해 구글이나 네이버에 질문을 하거나 키워드를 입력 (이때 이를 query 라고 함. ) 
2. 검색 - 검색 엔진은 해당 쿼리와 관련된 정보를 데이터 베이스나 인터넷에서 찾는다.
3. 유사도검색 - 검색 엔진은 쿼리와 데이터 베이스(혹은 인터넷)에 있는 문서들 사시의 유사도를 계산.(키워드 검색[^4], 시멘틱 검색[^5])
4. 랭킹처리 - 검색결과로 찾아낸 문서들 중에서 어떤 것이 질문과 가장 관련이 높은지를 결정. 
랭킹처리와 관련해서도 여러가지 방법이 존재한다. (페이지랭크[^1], TF-IDF[^2], 클릭률[^3])


[^1]: **페이지랭크(PageRank):** 웹페이지의 상대적 중요도를 결정하는 알고리즘. 중요한 페이지로부터 많은 링크를 받을수록 중요도가 높다고 평가합니다.
[^2]: **TF-IDF(Term Frequency-Inverse Document Frequency):** 문서 집합에서 특정 단어가 특정 문서 내에서 얼마나 중요한지를 나타내는 통계적 수치. 단어의 빈도와 역문서 빈도를 곱하여 계산합니다.
[^3]: **클릭률(CTR, Click-Through Rate):** 광고나 링크가 노출된 횟수 대비 클릭된 횟수의 비율. 사용자의 관심도를 측정하는 주요 지표입니다.
[^4]: **키워드 검색:** 사용자가 입력한 특정 단어나 구문이 포함된 문서를 찾는 가장 일반적인 검색 방식입니다.
[^5]: **시멘틱 검색(Semantic Search):** 검색어의 의미와 맥락, 사용자의 의도까지 파악하여 관련성 높은 정보를 제공하는 검색 기술입니다.


#### 2. 텍스트 생성

1. (검색엔진의 경우) 결과반환
    랭킹이 매겨진 문서 리스트를 사용자에게 보여줌.

2. (LLM의 경우) 텍스트 생성
    사용자의 질문과 검색 결과로 텍스트를 생성한다.

        예시) 
        query - 마이클 잭슨의 가장 유명한 노래는?
        database or internet - Billie Jean

        query + Billie Jean => LLM(generation) => answer

        generation(llm) - 마이클 잭슨의 가장 유명한 노래 중 하나는 Billie Jean 이며, bra bra..

    LLM 은 제공된 정보를 활용하여 구체적이고 정보에 기반한 텍스트를 생성할 수 있음. 