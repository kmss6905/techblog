<!DOCTYPE html><html lang="en" ><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="주니어 개발자가 개발할 때 더 개선할 여지는 없는지 고민해보자" /><meta name="author" content="김민식" /><meta property="og:locale" content="en_US" /><meta name="description" content="주니어 개발자로서 코드 작성 시 성능, 안전성, 리소스 등 다양한 관점에서 ‘이게 최선일까?’를 고민하는 습관의 중요성을 예제와 함께 설명합니다." /><meta property="og:description" content="주니어 개발자로서 코드 작성 시 성능, 안전성, 리소스 등 다양한 관점에서 ‘이게 최선일까?’를 고민하는 습관의 중요성을 예제와 함께 설명합니다." /><link rel="canonical" href="http://localhost:4000/2025/04/17/%EC%A3%BC%EB%8B%88%EC%96%B4-%EA%B0%9C%EB%B0%9C%EC%9E%90%EA%B0%80-%EA%B0%9C%EB%B0%9C%ED%95%A0-%EB%95%8C-%EB%8D%94-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%97%AC%EC%A7%80%EB%8A%94-%EC%97%86%EB%8A%94-%EC%A7%80-%EA%B3%A0%EB%AF%BC%ED%95%B4%EB%B3%B4%EC%84%B8%EC%9A%94" /><meta property="og:url" content="http://localhost:4000/2025/04/17/%EC%A3%BC%EB%8B%88%EC%96%B4-%EA%B0%9C%EB%B0%9C%EC%9E%90%EA%B0%80-%EA%B0%9C%EB%B0%9C%ED%95%A0-%EB%95%8C-%EB%8D%94-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%97%AC%EC%A7%80%EB%8A%94-%EC%97%86%EB%8A%94-%EC%A7%80-%EA%B3%A0%EB%AF%BC%ED%95%B4%EB%B3%B4%EC%84%B8%EC%9A%94" /><meta property="og:site_name" content="김민식 기술블로그" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-04-17T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="주니어 개발자가 개발할 때 더 개선할 여지는 없는지 고민해보자" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"김민식","url":"https://minshikkim.com"},"dateModified":"2025-04-17T00:00:00+09:00","datePublished":"2025-04-17T00:00:00+09:00","description":"주니어 개발자로서 코드 작성 시 성능, 안전성, 리소스 등 다양한 관점에서 ‘이게 최선일까?’를 고민하는 습관의 중요성을 예제와 함께 설명합니다.","headline":"주니어 개발자가 개발할 때 더 개선할 여지는 없는지 고민해보자","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2025/04/17/%EC%A3%BC%EB%8B%88%EC%96%B4-%EA%B0%9C%EB%B0%9C%EC%9E%90%EA%B0%80-%EA%B0%9C%EB%B0%9C%ED%95%A0-%EB%95%8C-%EB%8D%94-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%97%AC%EC%A7%80%EB%8A%94-%EC%97%86%EB%8A%94-%EC%A7%80-%EA%B3%A0%EB%AF%BC%ED%95%B4%EB%B3%B4%EC%84%B8%EC%9A%94"},"url":"http://localhost:4000/2025/04/17/%EC%A3%BC%EB%8B%88%EC%96%B4-%EA%B0%9C%EB%B0%9C%EC%9E%90%EA%B0%80-%EA%B0%9C%EB%B0%9C%ED%95%A0-%EB%95%8C-%EB%8D%94-%EA%B0%9C%EC%84%A0%ED%95%A0-%EC%97%AC%EC%A7%80%EB%8A%94-%EC%97%86%EB%8A%94-%EC%A7%80-%EA%B3%A0%EB%AF%BC%ED%95%B4%EB%B3%B4%EC%84%B8%EC%9A%94"}</script><title> 주니어 개발자가 개발할 때 더 개선할 여지는 없는지 고민해보자 - 김민식 기술블로그</title><link rel="shortcut icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" title="김민식 기술블로그" href="/atom.xml"><link rel="alternate" type="application/json" title="김민식 기술블로그" href="http://localhost:4000/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /> <script src="https://cdn.jsdelivr.net/npm/mermaid@11.9.0/dist/mermaid.min.js"></script><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}body{font-family:Inter,SF Pro,Segoe UI,Roboto,Oxygen,Ubuntu,Helvetica Neue,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.7;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:2.5rem 0 1rem 0}.post ul,.post ol{margin-left:1.5rem}.post table{border:1px solid gray;border-collapse:collapse}.post table td,.post table th{border:1px solid gray;padding:.5rem 1rem}.post table th{white-space:nowrap}.meta{margin:2rem 0}.meta p{margin:0}.meta time{display:block;margin-bottom:.5rem}.highlight code,pre{background:#fafafa}.highlight code{padding:.1rem}h1>code,h2>code,h3>code,h4>code,h5>code,h6>code,li>code,p>code{background-color:rgba(129,139,152,.1215686275);padding:2px 4px;border-radius:6px}pre.mermaid{background:none}pre.mermaid>*{background:inherit}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#000;height:1px;border:0;margin:1.5rem 0 2rem}header{flex-basis:10rem;flex-grow:1;position:relative}header>nav:first-child{margin-bottom:2rem}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{border-left:5px solid #ececec;padding-left:1rem;margin:1rem 0}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{font-size:2.125em;font-weight:800;margin-top:0;margin-bottom:.5em;line-height:1.5}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}.pagination{margin-top:1.5rem;display:flex;align-items:center;gap:1rem;margin-left:auto}.pagination .page_number{margin-right:1rem}.pagination .page_number .current{font-weight:bold}.pagination img{width:24px;height:24px;display:block;padding:4px}.pagination img.disabled{opacity:.3}main{display:flex;flex-wrap:wrap;max-width:60rem;margin:0 auto 2rem auto;padding:1rem}.title{margin:2rem auto 0 auto;max-width:60rem;padding-left:12rem;font-size:24px}.title a{text-decoration:none;font-weight:bold}.post a{overflow-wrap:break-word}.post li{margin-top:.25rem;margin-bottom:.25rem}.post iframe{max-width:100%}.mobile{display:none}@media screen and (max-width: 45rem){header{display:none}header.active{display:block;position:fixed;left:0;top:0;background:#fff;width:100%;height:100%;padding:2rem}header ul{border-right:none}header li{text-align:left;margin-right:0}header li>a{display:block;padding:.25rem 0}.logo{padding-bottom:1rem}.photos ul{margin-top:.5rem}.title{margin:2rem auto 0;padding:0;text-align:center}.mobile{display:flex}.mobile.menu-button{position:absolute;padding:.25rem;margin-left:1.5rem;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mobile.close-button{position:absolute;right:1.5rem;top:2rem;padding:.25rem;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0)}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}section.post .toc{border:1px solid #ccc;font-size:15px;margin:1rem 0 1.5rem}section.post .toc a{text-decoration:none}section.post .table-wrapper{overflow-x:auto;padding-bottom:1rem}figcaption{font-size:smaller}@media print{.no-print,.no-print *{display:none !important}}.content{--content-heading-weight: var(--weight-extrabold);--content-heading-line-height: 1.125;--content-block-margin-bottom: 1em;--content-blockquote-padding: 0.5em 1.5em;--content-pre-padding: 1.25em 1.5em;--content-table-cell-border-width: 0 0 1px;--content-table-cell-padding: 0.5em 0.75em;--content-table-head-cell-border-width: 0 0 2px;--content-table-body-last-row-cell-border-bottom-width: 0;--content-table-foot-cell-border-width: 2px 0 0}.content li+li{margin-top:.25em}.content p:not(:last-child),.content dl:not(:last-child),.content ol:not(:last-child),.content ul:not(:last-child),.content blockquote:not(:last-child),.content pre:not(:last-child),.content table:not(:last-child){margin-bottom:var(--content-block-margin-bottom)}.content h1,.content h2,.content h3,.content h4,.content h5,.content h6{font-weight:var(--content-heading-weight);line-height:var(--content-heading-line-height)}.content h1{font-size:2em;margin-bottom:.5em}.content h1:not(:first-child){margin-top:1em}.content h2{font-size:1.75em;margin-bottom:.5714em}.content h2:not(:first-child){margin-top:1.1428em}.content h3{font-size:1.5em;margin-bottom:.6666em}.content h3:not(:first-child){margin-top:1.3333em}.content h4{font-size:1.25em;margin-bottom:.8em}.content h5{font-size:1.125em;margin-bottom:.8888em}.content h6{font-size:1em;margin-bottom:1em}.content blockquote{padding:var(--content-blockquote-padding)}.content ol{list-style-position:outside;margin-inline-start:2em}.content ol:not(:first-child){margin-top:1em}.content ol:not([type]){list-style-type:decimal}.content ol:not([type]).is-lower-alpha{list-style-type:lower-alpha}.content ol:not([type]).is-lower-roman{list-style-type:lower-roman}.content ol:not([type]).is-upper-alpha{list-style-type:upper-alpha}.content ol:not([type]).is-upper-roman{list-style-type:upper-roman}.content ul{list-style:disc outside;margin-inline-start:2em}.content ul:not(:first-child){margin-top:1em}.content ul ul{list-style-type:circle;margin-bottom:.25em;margin-top:.25em}.content ul ul ul{list-style-type:square}.content dd{margin-inline-start:2em}.content figure:not([class]){margin-left:2em;margin-right:2em;text-align:center}.content figure:not([class]):not(:first-child){margin-top:2em}.content figure:not([class]):not(:last-child){margin-bottom:2em}.content figure:not([class]) img{display:inline-block}.content figure:not([class]) figcaption{font-style:italic}.content pre{-webkit-overflow-scrolling:touch;overflow-x:auto;padding:var(--content-pre-padding);white-space:pre;word-wrap:normal}.content sup,.content sub{font-size:75%}.content table td,.content table th{border-width:var(--content-table-cell-border-width);padding:var(--content-table-cell-padding);vertical-align:top}.content table th:not([align]){text-align:inherit}.content table thead td,.content table thead th{border-width:var(--content-table-head-cell-border-width)}.content table tfoot td,.content table tfoot th{border-width:var(--content-table-foot-cell-border-width)}.content table tbody tr:last-child td,.content table tbody tr:last-child th{border-bottom-width:var(--content-table-body-last-row-cell-border-bottom-width)}.content .tabs li+li{margin-top:0}.content.is-small{font-size:var(--size-small)}.content.is-normal{font-size:var(--size-normal)}.content.is-medium{font-size:var(--size-medium)}.content.is-large{font-size:var(--size-large)}:root{--weight-light: 300;--weight-normal: 400;--weight-medium: 500;--weight-semibold: 600;--weight-bold: 700;--weight-extrabold: 800}</style><script async src="https://www.googletagmanager.com/gtag/js?id=UA-150864545-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-150864545-1'); </script></head><body><div class="title"> <a href="/">김민식 기술블로그</a></div><main role="main"><header role="banner"><nav role="navigation"><ul><li><a href="/" >Posts</a></li><li><a href="/categories" >Categories</a></li><li><a href="/tags" >Tags</a></li><li><a href="/search" >Search</a></li></ul></nav></header><section class="post"><h1>주니어 개발자가 개발할 때 더 개선할 여지는 없는지 고민해보자</h1><div class="toc"><ol id="toc" class="section-nav"><li class="toc-entry toc-h1"><a href="#20250417---쉬운코드주니어-개발자가-개발할-때-더-개선할-여지는-없는-지-고민-해보자">2025.04.17 - [쉬운코드]주니어 개발자가 개발할 때 더 개선할 여지는 없는 지 고민 해보자</a><ol><li class="toc-entry toc-h2"><a href="#예제-1-1부터-n-까지의-정수-합sum을-구하는-함수를-작성">예제 1. 1부터 N 까지의 정수 합(Sum)을 구하는 함수를 작성</a></li><li class="toc-entry toc-h2"><a href="#예제-2-배치작업">예제 2. 배치작업</a><ol><li class="toc-entry toc-h4"><a href="#상황">상황</a></li><li class="toc-entry toc-h3"><a href="#생각-1-">생각 1. 🤔</a></li><li class="toc-entry toc-h3"><a href="#생각-2-">생각 2. 🤔</a></li></ol></li><li class="toc-entry toc-h2"><a href="#예제-3-캐싱caching">예제 3. 캐싱(Caching)</a></li><li class="toc-entry toc-h2"><a href="#정리--이게-최선일까-고민하는-습관">정리 : 이게 최선일까? 고민하는 습관</a><ol><li class="toc-entry toc-h3"><a href="#출처">출처</a></li></ol></li></ol></li></ol></div><div class="content"><h1 id="20250417---쉬운코드주니어-개발자가-개발할-때-더-개선할-여지는-없는-지-고민-해보자">2025.04.17 - [쉬운코드]주니어 개발자가 개발할 때 더 개선할 여지는 없는 지 고민 해보자</h1><h2 id="예제-1-1부터-n-까지의-정수-합sum을-구하는-함수를-작성">예제 1. 1부터 N 까지의 정수 합(Sum)을 구하는 함수를 작성</h2><div class="language-java highlighter-rouge"><div class="highlight"><pre class="syntax"><code>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">intSum</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">){</span>
    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">(</span><span class="n">n</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sum</span> <span class="o">+=</span> <span class="n">n</span> <span class="o">--;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">sum</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// 성능 훨 좋다.</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">intSum3</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">){</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">/</span> <span class="mi">2</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><div class="language-java highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intSum</span><span class="o">(</span><span class="mi">1_000_000</span><span class="o">));</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intSum</span><span class="o">(</span><span class="mi">1_000_000</span><span class="o">));</span>

<span class="mi">1784293664</span>
<span class="o">-</span><span class="mi">363189984</span>

</code></pre></div></div><div class="language-java highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="c1">// long type 으로 바꿔보자</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">intSum4</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">){</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">n</span> <span class="o">/</span> <span class="mi">2</span><span class="o">)</span> <span class="o">*</span> <span class="o">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
    <span class="o">}</span><span class="k">else</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">n</span> <span class="o">*</span> <span class="o">((</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">/</span> <span class="mi">2</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intSum</span><span class="o">(</span><span class="mi">1_000_000</span><span class="o">));</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">intSum</span><span class="o">(</span><span class="mi">1_000_000</span><span class="o">));</span>

<span class="mi">1784293664</span>
<span class="mi">1784293664</span>
</code></pre></div></div><h2 id="예제-2-배치작업">예제 2. 배치작업</h2><h4 id="상황">상황</h4><ul><li>어떤 기기가 1분 마다 스캔한 데이터를 DB에 저장하고 있는 상황</li><li>해당 기기가 100대가 있음</li><li>배치 작업 : 검수를 위해 하루 한번 100대가 하루 동안 스캔한 데이터를 각각의 압축 파일로 만들어서 3rd party API 를 통해 업로드</li></ul><hr /><h3 id="생각-1-">생각 1. 🤔</h3><ul><li>최초에 배치는 싱글 스레드로 구현 : 총 7시간 정도 소요</li><li>이걸 스레드 10개로 증가 : 총 3시간 정도로 시간 단축</li><li>하지만 더 개선할 여지는 없을까??</li></ul><hr /><h3 id="생각-2-">생각 2. 🤔</h3><p>왜 스레드 개수를 <em>열개</em> 로 잡았는가 ?? 일단 한번 트라이??</p><ul><li>하나의 태스크를 조금 더 구체적으로 분석해보자<ol><li>기기 한 대가 하루 동안 스캔한 데이터를 압축</li><li>압축 파일을 검수 API에 업로드</li></ol></li></ul><p>1번의 경우 CPU bound, 소요 시간은 약 4분 2번의 경우 I/O bound, 소요 시간 약 1분</p><hr /><p>I/O bound 일 때는 스레드가 적당히 많으면 오히려 병렬성에 좋음 CPU bound 일 때는 스레드가 많으면 ?? 서버 core 수!</p><ol><li>CPU bound → 소요시간 약 4분<ol><li>CPU Bound 일 때는 스레드가 많으면?<ol><li>서버 Core 수</li><li>배치서버는 2core<ol><li>압축하는 동안에 다른 거 할 수 없다.</li></ol></li></ol></li></ol></li><li>IO Bound → 소요시간 약 1분<ol><li>IO 바운드일 때는 스레드가 적당히 많으면 오히려 병렬성에 좋다.</li></ol></li></ol><ul><li>왜 스레드 개수를 열개로 잡았는가???? → 음.. 열개가 최선의 선택은 아닐 수 있다! 더 나은 스레드 개수가 있을 수 있음!, 다섯개로 조정해볼까?</li><li>최적의 스레드 수를 찾는 게 베스트일까? 오버 엔지니어링 아닐까??<ul><li>기기 100개 이지만, 더 늘어날 수도 있고</li><li>센싱하는 데이터가 1분마다가 아니라 더 늘어날 수도 있고? …</li><li>음.. 그러면 앞으로 스레드 수 찾는 게 가변 적일 건데 이게 오버엔지니어링 아닐까?</li></ul></li><li>관점의 재점검!! : 스레드 수 조정 외에 다른 접근 은 없을까?(내가 스레드에만 몰입 한 것이 아닐까?)<ul><li>scale up! core 수 증가!</li><li>scale out! 더 많은 서버 사용!!</li></ul></li><li>이게 최선일까? 현재 서버 스펙에서 더 개선할 여지는 없을까?<ol><li>기기 한대가 하루 동안 스캔한 데이터를 압축 : CPU bound, 약 4분 소요</li><li>압축 파일을 검수 API 에 업로드 : I/O bound, 약 1분소요</li></ol></li></ul><p>⇒ 기기 100대에 대해서 1번 작업부터 먼저 다하고 이어서 2번 작업을 한번에 하면 어떨까?</p><ul><li>1번 작업할 때는 2~3개 스레드</li><li><p>2번 작업 때 비동기 호출(WebClient, etc…)</p></li><li>이게 최선일 까? 더 개선할 여지는 없을까? (추가로 고려해볼 만한 내용)<ul><li>검수 API에 부하를 주진 않을까? (동시에 몇개의 파일을 업로드 할 지 고려)</li><li>DB에서 데이터를 읽어올 때 하루치 스캔 데이터를 한번에 다 읽어보면 서버 메모리는 괜찮을까?<ul><li>1기가 DB에 있다고 가정 → 1기가 전부를 배치 어플에 올려둔다? → 이건 메모리에 부담이다.<ul><li>그러면 한번에 읽지 말고, 스트림 방식으로 가져와서 파일을 떨구는 건 어떨까?</li><li>스트림 방식으로 압축 파일 생성 방법 검색<ul><li>etc) 압축알고리즘은 또 어떤게 있지? (검수 API 쪽에서 허용되는 압축포맷도 확인해봐야하는 부분이고…)</li></ul></li></ul></li></ul></li></ul></li></ul><h2 id="예제-3-캐싱caching">예제 3. 캐싱(Caching)</h2><div class="language-java highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="kd">private</span> <span class="nc">Cache</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">CachedProduct</span><span class="o">&gt;</span> <span class="n">productCache</span> <span class="o">=</span> <span class="nc">Caffeine</span><span class="o">.</span><span class="na">newBuilder</span><span class="o">().</span><span class="na">build</span><span class="o">();</span>

<span class="nc">CachedProduct</span> <span class="n">product</span> <span class="o">=</span> <span class="n">productCache</span><span class="o">.</span><span class="na">getIfPresent</span><span class="o">(</span><span class="n">productId</span><span class="o">);</span>


<span class="n">product</span><span class="o">.</span><span class="na">price</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span><span class="nc">Math</span><span class="o">.</span><span class="na">ceil</span><span class="o">(</span><span class="n">product</span><span class="o">.</span><span class="na">price</span> <span class="o">/</span> <span class="n">usdToWonRate</span><span class="o">);</span> <span class="c1">// 달러로 바꿈 &lt;- 문제가 되는 부분</span>

<span class="c1">// 달러로 바꾸는 과정은 캐시된 데이터 를 기준으로 바꾸고 있다.!! 힙 메모리를 참조하고 있기 떄문</span>
<span class="c1">// 완전망한다. 10000 원화가 -&gt; 5달러로 그대로 바뀐채로 계속 !</span>

</code></pre></div></div><div class="language-java highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="kd">public</span> <span class="kd">record</span> <span class="nf">CachedProduct</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">modelName</span><span class="o">,</span> <span class="kt">int</span> <span class="n">price</span><span class="o">)</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
	<span class="kd">public</span> <span class="nc">String</span> <span class="n">modelName</span><span class="o">;</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="n">price</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><p>음.. 그러면 어떻게 개선할 수 있을까?</p><p>price 를 바꿀 수 있어서 그런거라고 생각해서 final 을 붙이는 게 최선일까 ? 결국 cached 된 것들은 값을 바꾸면 안되는 건가? → 불변객체로 만들어야 한다.?</p><p>내가 저장하는 데이터를 캐싱, 참조될거고, 맘대로 바꾸면 위험할 듯</p><div class="language-java highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">CachedProduct</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="n">modelName</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">price</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">CachedProduct</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">,</span> <span class="nc">String</span> <span class="n">modelName</span><span class="o">,</span> <span class="kt">int</span> <span class="n">price</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">modelName</span> <span class="o">=</span> <span class="n">modelName</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">price</span> <span class="o">=</span> <span class="n">price</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><div class="language-java highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="kd">public</span> <span class="kd">record</span> <span class="nc">CachedProduct</span> <span class="o">{</span>
	<span class="kt">int</span> <span class="n">id</span><span class="o">;</span>
	<span class="nc">String</span> <span class="n">modelName</span><span class="o">;</span>
	<span class="kt">int</span> <span class="n">price</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div><p>CachedProduct 의 타입이 primitive type 이 아닌 List 가 추가 된다면?? 어떻게 될까? List 를 불변객체 ?</p><p>List<Seller> …</Seller></p><p>그 외 생각해볼 것</p><ul><li>우리 사이트에서 물품을 원화(KRW)로만 판매하다가 , 달러 (USD)로도 판매할 예정이다.<ul><li>백엔드 프론트 각각 코드를 조금씩 고치면 달러로도 판매하게 끔 만들 수 있다.<ul><li>음 이게 최선일까?</li></ul></li><li>그런데 앞으로 일본과 동남아 쪽도 공략 예정이라고 한다.</li><li>엔화 등 추가적인 통화 (currency) 지원이 필요할 수 있다.</li><li>이 상황에서 어떤 것이 최선일까?<ul><li>매번 통화가 추가될때 마다 백엔드 프론트 코드를 조금 씩 고치는 게 나을까?</li><li>아니면 어드민 페이지에서 딸깍 한번이면 통화 추가가 자유롭게 추가 삭제 되는 게 좋을까?</li></ul></li></ul></li></ul><h2 id="정리--이게-최선일까-고민하는-습관">정리 : 이게 최선일까? 고민하는 습관</h2><ul><li><p>성능 혹은 안전성의 관점에서 늘 고민</p></li><li><p>리소스는 언제나 한정되어 있다.</p></li><li><p>명확한 근거를 추구하고 있는가 ? (단, 너무 집착, 오버엔지니어링은 경계할 것)</p></li><li><p>바라보는 관점을 다양화 하기(내가 너무 스레드 개수로만 집착하지 않았는 가? .., db? redis ? 방법론 측면에서 ?! )</p></li><li><p>더 편할 순 없는가?</p></li></ul><p>…</p><h3 id="출처">출처</h3><hr /><p>https://www.youtube.com/watch?v=ZWWUSN13Wzw</p></div><div class="meta"> <time datetime="2025-04-17T00:00:00+09:00">April 17, 2025</time><p> categories: <a href="/category/커리어">커리어</a></p><p> tags: <a href="/tag/주니어개발자">주니어개발자</a> , <a href="/tag/성장">성장</a> , <a href="/tag/코드개선">코드개선</a> , <a href="/tag/성능최적화">성능최적화</a> , <a href="/tag/쉬운코드">쉬운코드</a> , <a href="/tag/클린코드">클린코드</a> , <a href="/tag/개발문화">개발문화</a></p></div><script> mermaid.initialize({startOnLoad:true}); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script></section></main></body></html>
