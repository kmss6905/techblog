<!DOCTYPE html><html lang="en" ><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="Jekyll and pig.js" /><meta name="author" content="Colin Holzman" /><meta property="og:locale" content="en_US" /><meta name="description" content="Photo Gallery" /><meta property="og:description" content="Photo Gallery" /><link rel="canonical" href="http://localhost:4000/2019/04/22/jekyll-and-pig" /><meta property="og:url" content="http://localhost:4000/2019/04/22/jekyll-and-pig" /><meta property="og:site_name" content="김민식 기술블로그" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-04-22T22:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Jekyll and pig.js" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@Colin Holzman" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Colin Holzman"},"dateModified":"2019-04-22T22:00:00+09:00","datePublished":"2019-04-22T22:00:00+09:00","description":"Photo Gallery","headline":"Jekyll and pig.js","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/04/22/jekyll-and-pig"},"url":"http://localhost:4000/2019/04/22/jekyll-and-pig"}</script><title> Jekyll and pig.js - 김민식 기술블로그</title><link rel="shortcut icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" title="김민식 기술블로그" href="/atom.xml"><link rel="alternate" type="application/json" title="김민식 기술블로그" href="http://localhost:4000/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0}body{font-family:-apple-system,BlinkMacSystemFont,"avenir next",avenir,helvetica,"helvetica neue",ubuntu,roboto,noto,"segoe ui",arial,sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.5;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin:2rem 0}code,pre{background:#ecedee}code{padding:.1rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#000;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{font-style:italic;border-left:5px solid #ececec;padding-left:1rem}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:.5rem}.posts ul,header ul{list-style:none;padding:0}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}main{display:flex;flex-wrap:wrap;max-width:60rem;margin:0 auto 2rem auto;padding:1rem}.title{margin:2rem auto 0 auto;max-width:60rem;padding-left:12rem;font-size:24px}.title a{text-decoration:none;font-weight:bold}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:.5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}.section-nav{background-color:#fff;margin:5px 0;padding:10px 30px;border:1px solid #e8e8e8;border-radius:3px}figcaption{font-size:smaller}.pagination{margin-top:1.5rem;display:flex;align-items:center;gap:1rem;margin-left:auto}.pagination .page_number{margin-right:1rem}.pagination .page_number .current{font-weight:bold}.pagination img{width:24px;height:24px;display:block;padding:4px}.pagination img.disabled{opacity:.3}</style><script async src="https://www.googletagmanager.com/gtag/js?id=UA-150864545-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-150864545-1'); </script></head><body><div class="title"> <a href="/">김민식 기술블로그</a></div><main role="main"><header role="banner"><nav role="navigation"><ul><li><a href="/" >Posts</a></li><li><a href="/about" >About</a></li><li><a href="/resume" >Resume</a></li><li><a href="/search" >Search</a></li><li><a href="/atom.xml" >Rss</a></li></ul></nav></header><section class="post"><h2>Jekyll and pig.js</h2><div class="toc"><ol id="toc" class="section-nav"><li class="toc-entry toc-h2"><a href="#photo-gallery">Photo Gallery</a></li><li class="toc-entry toc-h2"><a href="#generating-assets">Generating Assets</a></li><li class="toc-entry toc-h2"><a href="#gallerybuilder">gallerybuilder</a></li><li class="toc-entry toc-h2"><a href="#adding-links">Adding links</a></li><li class="toc-entry toc-h2"><a href="#result">Result</a></li></ol></div><div class="content"><h2 id="photo-gallery">Photo Gallery</h2><p>I tried using <a href="https://github.com/ElasticDesigns/jekyll-lens">Jekyll Lens</a> for a photo gallery on <a href="https://colinholzman.xyz">colinholzman.xyz</a>. It worked and was easy to use but was not exactly what I wanted. While looking for a better method I came across <a href="https://chuckleplant.github.io/2018/08/06/pig-img-gallery.html">this</a> post by Sergio Basurco. In it he describes how he modified the <a href="https://github.com/aerobless/jekyll-photo-gallery">Jekyll Photo Gallery</a> plugin to use <a href="https://github.com/schlosser/pig.js">pig.js</a> for loading images. Pig.js is a simple and lightweight JavaScript library to enable progressive loading of images as the user scrolls to them. The <a href="https://feeding.schlosser.io/">example</a> is exactly the effect that I was looking for.</p><h2 id="generating-assets">Generating Assets</h2><p>Pig.js expects to be able to load various sizes for each image. To do this the we must store the images in a manner that allows the pig.js function <code>urlForSize</code> to return the path to the image of a given size. I have chosen to store my images like so:</p><pre><code>├── assets
│   ├── img
│   │   ├── 20
│   │   |   ├── blue.jpg
│   │   |   ...
│   │   ├── 100
│   │   |   ├── red.jpg
│   │   |   ...
│   │   ├── 250
│   │   |   ├── green.jpg
│   │   |   ...
│   │   ├── 500
│   │   │   ├── blue.jpg
...
</code></pre><p>Since my goal is to display potentially hundreds of images like this I need a tool to resize them all and generate the directory structure above.</p><h2 id="gallerybuilder">gallerybuilder</h2><p><a href="https://github.com/clnhlzmn/gallerybuilder/blob/master/main.py">gallerybuilder</a> is a simple python script I wrote to take a directory full of photos, resize them all to the sizes required by pig.js, and generate the html for my gallery page. It’s a rough draft for now but it does the trick.</p><h2 id="adding-links">Adding links</h2><p>One last thing I did to enhance the gallery experience is make each image a link to a full size version. To get the link to the full size image I call <code>urlForSize</code> with size equal to 1024. Therefore when creating thumbnail images for the assets folder we have to create sizes 20, 100, 250, 500, (for original pig.js) and 1024 (for full size link). You can see the simple change to pig.js <a href="https://github.com/schlosser/pig.js/compare/master...clnhlzmn:master#diff-ded216d1d585dc143459a4bdbbed4626R785">here</a>.</p><h2 id="result">Result</h2><p>You can see what this looks like on my site <a href="https://colinholzman.xyz/gallery">here</a>. TODO: add a lot more photos.</p></div><span class="meta"><time datetime="2019-04-22T22:00:00+09:00">April 22, 2019</time> &middot; <a href="/tag/website">website</a>, <a href="/tag/blog">blog</a>, <a href="/tag/jekyll">jekyll</a></span> <script type="module"> import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs'; mermaid.initialize({ startOnLoad: true }); </script></section></main></body></html>
